<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cqut.czb.bn.dao.mapper.WxOilCodeSaleMapperExtra">

  <select id="getWxOilCodeSaleList" parameterType="com.cqut.czb.bn.entity.dto.CommodityStockDTO" resultType="com.cqut.czb.bn.entity.dto.CommodityStockDTO">
    SELECT DISTINCT
    e.item_no as itemNo,
    e.commodity_id as commodityID,
    e.commodity_title as name,
    e.commodity_num,
    e.create_at
    FROM `czb_wechat_stock`as a
    LEFT JOIN czb_wechat_stock_attr as b on a.stock_id = b.stock_id
    LEFT JOIN czb_wechat_commodity as e on e.commodity_id = a.commodity_id
    <where>
      e.take_way = 3
      and a.state = 0
      <if test="itemNo != null and itemNo != ''">
        and e.item_no =  #{state}
      </if>
      <if test="name != null and name != ''">
        and e.commodity_title LIKE concat('%',#{name,jdbcType=VARCHAR},'%')
      </if>
      <if test="startTime!= null and endTime!= null">
        and e.create_at &gt;= #{startTime,jdbcType=TIMESTAMP}
        and e.create_at &lt;= #{endTime,jdbcType=TIMESTAMP}
      </if>
    </where>


  </select>

</mapper>