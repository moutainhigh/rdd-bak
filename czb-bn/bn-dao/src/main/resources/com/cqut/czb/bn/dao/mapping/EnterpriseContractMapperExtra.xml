<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cqut.czb.bn.dao.mapper.EnterpriseContractMapperExtra" >

    <!--合同基本信息-->
    <select id="getBasisInfo" resultType="com.cqut.czb.bn.entity.dto.backOfEnterpriseContract.BasisContractInfo">
        SELECT
            record_id contractId,
            signed_time signedAt,
            create_at createAt,
            contract_start_time startTime,
            contract_end_time endTime,
            contract_state STATUS,
            third_contract_num thirdContractId,
            pay_total_money payTotal,
            witness_id czId,
            bank_of_deposit bankDeposit,
            bank_account_num bankNum,
            bank_user_name bankName
        FROM
            czb_contract_records
        WHERE
            record_id = #{contractId}
    </select>

    <!--合同打款信息-->
    <select id="getPayInfoList" resultType="com.cqut.czb.bn.entity.dto.backOfEnterpriseContract.PayInfoDTO">
        SELECT
            record_id payId,
            payee_name payToName,
            payee_id_card PersonCarId,
            contract_record_id contractId,
            payable_money shouldPay,
            actual_pay_money realPay,
            target_year_month yearMonth,
            platform_pay_time payTime,
            state status
        FROM
            czb_pay_to_person
        WHERE
            contract_record_id = #{contractId}
        AND is_deleted = 0
    </select>

    <!--合同油卡号-->
    <select id="getPetrolInfoList" resultType="com.cqut.czb.bn.entity.dto.backOfEnterpriseContract.PetrolInfoDTO">
        SELECT
            record_id petrolRecordId,
            petrol_num petrolNum,
            buyer_id buyerId,
            payment_method payMethod,
            third_order_id thirdNum,
            turnover_amount amount,
            transaction_time makeTime,
            petrol_id petrolId,
            state STATUS,
            contract_id contractId,
            petrol_kind petrolType
        FROM
            czb_petrol_sales_records
        WHERE
            contract_id = #{contractId}
            AND record_type = 0
    </select>
</mapper>